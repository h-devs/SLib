if (NOT ANDROID)

set (TARGET_NAME mongoc)
set (ROOT_DIR "${SLIB_PATH}/external/src/libmongoc")

add_definitions(-DBSON_COMPILATION -DMONGOC_COMPILATION -DKMS_MSG_STATIC)

set (
  SRC_LIST
  "bson/bcon.c"
  "bson/bson.c"
  "bson/bson-atomic.c"
  "bson/bson-clock.c"
  "bson/bson-context.c"
  "bson/bson-decimal128.c"
  "bson/bson-error.c"
  "bson/bson-iter.c"
  "bson/bson-iso8601.c"
  "bson/bson-json.c"
  "bson/bson-keys.c"
  "bson/bson-md5.c"
  "bson/bson-memory.c"
  "bson/bson-oid.c"
  "bson/bson-reader.c"
  "bson/bson-string.c"
  "bson/bson-timegm.c"
  "bson/bson-utf8.c"
  "bson/bson-value.c"
  "bson/bson-version-functions.c"
  "bson/bson-writer.c"

  "common/common-b64.c"
  "common/common-md5.c"
  "common/common-thread.c"

  "jsonsl/jsonsl.c"
  
  "kms-message/kms_b64.c"
  "kms-message/hexlify.c"
  "kms-message/kms_crypto_none.c"
  "kms-message/kms_crypto_windows.c"
  "kms-message/kms_crypto_apple.c"
  "kms-message/kms_crypto_libcrypto.c"
  "kms-message/kms_caller_identity_request.c"
  "kms-message/kms_decrypt_request.c"
  "kms-message/kms_encrypt_request.c"
  "kms-message/kms_kv_list.c"
  "kms-message/kms_message.c"
  "kms-message/kms_port.c"
  "kms-message/kms_request.c"
  "kms-message/kms_request_opt.c"
  "kms-message/kms_request_str.c"
  "kms-message/kms_response.c"
  "kms-message/kms_response_parser.c"
  "kms-message/sort.c"

  "mongoc/mongoc-aggregate.c"
  "mongoc/mongoc-apm.c"
  "mongoc/mongoc-array.c"
  "mongoc/mongoc-async.c"
  "mongoc/mongoc-async-cmd.c"
  "mongoc/mongoc-topology-background-monitoring.c"
  "mongoc/mongoc-buffer.c"
  "mongoc/mongoc-bulk-operation.c"
  "mongoc/mongoc-change-stream.c"
  "mongoc/mongoc-client.c"
  "mongoc/mongoc-client-pool.c"
  "mongoc/mongoc-client-side-encryption.c"
  "mongoc/mongoc-cluster.c"
  "mongoc/mongoc-cluster-aws.c"
  "mongoc/mongoc-collection.c"
  "mongoc/mongoc-compression.c"
  "mongoc/mongoc-counters.c"
  "mongoc/mongoc-crypt.c"
  "mongoc/mongoc-cursor.c"
  "mongoc/mongoc-cursor-legacy.c"
  "mongoc/mongoc-cursor-array.c"
  "mongoc/mongoc-cursor-find.c"
  "mongoc/mongoc-cursor-find-cmd.c"
  "mongoc/mongoc-cursor-find-opquery.c"
  "mongoc/mongoc-cursor-cmd.c"
  "mongoc/mongoc-cursor-change-stream.c"
  "mongoc/mongoc-cursor-cmd-deprecated.c"
  "mongoc/mongoc-database.c"
  "mongoc/mongoc-error.c"
  "mongoc/mongoc-find-and-modify.c"
  "mongoc/mongoc-host-list.c"
  "mongoc/mongoc-init.c"
  "mongoc/mongoc-interrupt.c"
  "mongoc/mongoc-gridfs.c"
  "mongoc/mongoc-gridfs-bucket.c"
  "mongoc/mongoc-gridfs-bucket-file.c"
  "mongoc/mongoc-gridfs-file.c"
  "mongoc/mongoc-gridfs-file-page.c"
  "mongoc/mongoc-gridfs-file-list.c"
  "mongoc/mongoc-handshake.c"
  "mongoc/mongoc-http.c"
  "mongoc/mongoc-index.c"
  "mongoc/mongoc-linux-distro-scanner.c"
  "mongoc/mongoc-list.c"
  "mongoc/mongoc-log.c"
  "mongoc/mongoc-matcher-op.c"
  "mongoc/mongoc-matcher.c"
  "mongoc/mongoc-memcmp.c"
  "mongoc/mongoc-cmd.c"
  "mongoc/mongoc-ocsp-cache.c"
  "mongoc/mongoc-opts.c"
  "mongoc/mongoc-opts-helpers.c"
  "mongoc/mongoc-queue.c"
  "mongoc/mongoc-read-concern.c"
  "mongoc/mongoc-read-prefs.c"
  "mongoc/mongoc-rpc.c"
  "mongoc/mongoc-server-description.c"
  "mongoc/mongoc-server-stream.c"
  "mongoc/mongoc-client-session.c"
  "mongoc/mongoc-set.c"
  "mongoc/mongoc-server-monitor.c"
  "mongoc/mongoc-socket.c"
  "mongoc/mongoc-stream.c"
  "mongoc/mongoc-stream-buffered.c"
  "mongoc/mongoc-stream-file.c"
  "mongoc/mongoc-stream-gridfs.c"
  "mongoc/mongoc-stream-gridfs-download.c"
  "mongoc/mongoc-stream-gridfs-upload.c"
  "mongoc/mongoc-stream-socket.c"
  "mongoc/mongoc-topology.c"
  "mongoc/mongoc-topology-description.c"
  "mongoc/mongoc-topology-description-apm.c"
  "mongoc/mongoc-topology-scanner.c"
  "mongoc/mongoc-uri.c"
  "mongoc/mongoc-util.c"
  "mongoc/mongoc-version-functions.c"
  "mongoc/mongoc-write-command.c"
  "mongoc/mongoc-write-command-legacy.c"
  "mongoc/mongoc-write-concern.c"
  "mongoc/mongoc-crypto.c"
  "mongoc/mongoc-scram.c"
  "mongoc/mongoc-crypto-openssl.c"
  "mongoc/mongoc-rand-openssl.c"
  "mongoc/mongoc-crypto-common-crypto.c"
  "mongoc/mongoc-rand-common-crypto.c"
  "mongoc/mongoc-crypto-cng.c"
  "mongoc/mongoc-rand-cng.c"
  "mongoc/mongoc-stream-tls.c"
  "mongoc/mongoc-ssl.c"
  "mongoc/mongoc-libressl.c"
  "mongoc/mongoc-stream-tls-libressl.c"
  "mongoc/mongoc-openssl.c"
  "mongoc/mongoc-stream-tls-openssl.c"
  "mongoc/mongoc-stream-tls-openssl-bio.c"
  "mongoc/mongoc-secure-transport.c"
  "mongoc/mongoc-stream-tls-secure-transport.c"
  "mongoc/mongoc-secure-channel.c"
  "mongoc/mongoc-stream-tls-secure-channel.c"
  "mongoc/mongoc-cluster-sasl.c"
  "mongoc/mongoc-sasl.c"
  "mongoc/mongoc-cluster-cyrus.c"
  "mongoc/mongoc-cyrus.c"
  "mongoc/mongoc-cluster-sspi.c"
  "mongoc/mongoc-sspi.c"
)

include ("${CMAKE_CURRENT_LIST_DIR}/common.inc.cmake")

target_include_directories (
 ${TARGET_NAME}
 PRIVATE "${ROOT_DIR}/../../include"
 PRIVATE "${ROOT_DIR}/../../include/bson"
 PRIVATE "${ROOT_DIR}/../../include/mongoc"
 PRIVATE "${ROOT_DIR}"
 PRIVATE "${ROOT_DIR}/common"
)

target_compile_options (
 ${TARGET_NAME}
 PRIVATE -Os -g0
)

endif ()
